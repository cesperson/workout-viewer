<link rel="import" href="../components/polymer/polymer.html">
<!--<link rel="import" href="../post-service/post-service.html">-->
<link rel="import" href="../post-service/workout-service.html">
<!--<link rel="import" href="post-card.html">-->
<link rel="import" href="workout-card.html">

<polymer-element name="workout-list" attributes="show">
    <template>
        <style>
            :host {
                display: block;
                width: 100%;
            }
            workout-card {
                margin-bottom: 30px;
            }
            .workout {
                border-bottom: 1px solid #000;
                width: 100%;
                margin-bottom: 30px;
            }
        </style>


        <!--<post-service id="service" posts="{{posts}}"></post-service>-->
        <workout-service id="service" workouts="{{ workouts }}"></workout-service>

        <div layout vertical center>
            <template repeat="{{workout in workouts}}" class="workout">
                <div class="workout">
                    <template repeat="{{workout in workouts}}">
                    </template>
                    <workout-card
                            favorite="{{workout.favorite}}"
                            sets="{{workout.sets}}"
                            type="squat"
                            on-favorite-tap="{{handleFavorite}}"
                            hidden?="{{show == 'favorites' && !workout.favorite}}">
                    </workout-card>
                    <workout-card
                            favorite="{{workout.favorite}}"
                            sets="{{workout.sets}}"
                            type="deadlift"
                            on-favorite-tap="{{handleFavorite}}"
                            hidden?="{{show == 'favorites' && !workout.favorite}}">
                    </workout-card>
                    <workout-card
                            favorite="{{workout.favorite}}"
                            sets="{{workout.sets}}"
                            type="chin"
                            on-favorite-tap="{{handleFavorite}}"
                            hidden?="{{show == 'favorites' && !workout.favorite}}">
                    </workout-card>
                </div>
            </template>
        </div>

    </template>

    <script>
        Polymer({
            handleFavorite: function(event, detail, sender) {
                var post = sender.templateInstance.model.post;
                this.$.service.setFavorite(post.uid, post.favorite);
            }
        });
    </script>
</polymer-element>
