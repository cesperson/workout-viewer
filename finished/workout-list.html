<link rel="import" href="../components/polymer/polymer.html">
<!--<link rel="import" href="../post-service/post-service.html">-->
<link rel="import" href="../post-service/workout-service.html">
<!--<link rel="import" href="post-card.html">-->
<link rel="import" href="workout-card.html">

<polymer-element name="workout-list" attributes="show">
    <template>
        <style>
            :host {
                display: block;
                width: 100%;
            }
            workout-card {
                margin-bottom: 30px;
            }
        </style>


        <!--<post-service id="service" posts="{{posts}}"></post-service>-->
        <workout-service id="service" workouts="{{ workouts }}"></workout-service>


        <div layout vertical center>
            <template repeat="{{workout in workouts}}">
                <workout-card
                        favorite="{{workout.favorite}}"
                        sets="{{workout.sets}}"
                        on-favorite-tap="{{handleFavorite}}"
                        hidden?="{{show == 'favorites' && !workout.favorite}}">
                </workout-card>
            </template>
        </div>
    </template>

    <script>
        Polymer({
            handleFavorite: function(event, detail, sender) {
                var post = sender.templateInstance.model.post;
                this.$.service.setFavorite(post.uid, post.favorite);
            },
            onlyType: function (value, type) {
                var typeSet = [];
                value.forEach(function(element, index) {
                    if (element.type === type) {
                        typeSet.push(element);
                    }
                })
                return typeSet;
            },
            onlySquats: function (value) {
                var squats = [];
                value.forEach(function(element, index) {
                    if (element.type === "squat") {
                        squats.push(element);
                    }
                })
                return squats;
            }
        });
    </script>
</polymer-element>
