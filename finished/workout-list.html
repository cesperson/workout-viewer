<link rel="import" href="../components/polymer/polymer.html">
<!--<link rel="import" href="../post-service/post-service.html">-->
<link rel="import" href="../post-service/workout-service.html">
<!--<link rel="import" href="post-card.html">-->
<link rel="import" href="workout-card.html">

<polymer-element name="workout-list" attributes="show">
    <template>
        <style>
            :host {
                display: block;
                width: 100%;
            }
            workout-card {
                margin-bottom: 30px;
            }
        </style>


        <!--<post-service id="service" posts="{{posts}}"></post-service>-->
        <workout-service id="service" workouts="{{ workouts }}"></workout-service>


        <div layout vertical center>
            <template repeat="{{workout in workouts}}">
                <workout-card
                        favorite="{{workout.favorite}}"
                        sets="{{workout.sets}}"
                        on-favorite-tap="{{handleFavorite}}"
                        hidden?="{{show == 'favorites' && !workout.favorite}}">
                <template repeat="{{ set in workout.sets }}">
                    <set-row type="{{ set.type }}"
                             weight="{{ set.weight }}"
                             reps="{{ set.reps }}">
                    </set-row>
                </template>
                </workout-card>
            </template>
        </div>
    </template>

    <script>
        Polymer({
            handleFavorite: function(event, detail, sender) {
                var post = sender.templateInstance.model.post;
                this.$.service.setFavorite(post.uid, post.favorite);
            }
        });
    </script>
</polymer-element>
